var xhttp=null;function paletteAjax(e,t){xhttp&&xhttp.abort(),(xhttp=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(this.responseText.error?alert(this.responseText.errorMessage):t(JSON.parse(this.response)),xhttp=null)},xhttp.open("GET",e,!0),xhttp.send()}document.addEventListener("click",function(e){if("path"==e.target.tagName)var t=e.target.parentElement.parentElement;else if("svg"==e.target.tagName)t=e.target.parentElement;else t=e.target;if("download-link"==t.className){var a=t.id.replace("download-",""),n=document.getElementsByClassName("palette-name")[0].innerHTML.slice(0,-8);paletteAjax("/palette-list/dl?p="+document.getElementsByClassName("palette-info")[0].dataset.pid,function(e){if("success"==e){var t=document.getElementsByClassName("download-count")[0],a=+t.innerHTML+1;t.innerHTML=a}}),ga("send","event","Palette List Download",a,n)}else t.classList.contains("db-analysis")&&(e.preventDefault(),popup("DawnBringer Palette Analysis",'<img src="'+t.href+'" /><br /><p>Created with the <a href="/palettes/dawnbringer-palette-analyser">DawnBringer Palette Analyser</a></p>'),document.querySelector("#popup-reusable .content").style.width="650px")});